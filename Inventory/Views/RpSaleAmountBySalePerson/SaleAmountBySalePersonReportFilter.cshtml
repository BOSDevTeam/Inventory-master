@{
    Layout = "~/Views/Shared/_LayoutReport.cshtml";
}

<head>
    <link rel="stylesheet" type="text/css" href="~/assets/css/style.css">
    <link href="~/Content/Site.css" rel="stylesheet" />
    <script src="~/assets/js/jquery-3.2.1.min.js"></script>

    <style type="text/css">
        #subMenuSaleRpGp {
            display: block;
        }
    </style>
    <script type="text/javascript">
        document.getElementById('subMenuSaleAmountBySalePersonRp').className = 'active';
    </script>
</head>

<div>
    <div class="row setup-title-layout">
        <div class="col-md-6 col-lg-6">
            <label class="page-title">@Resource.SaleAmountBySalePersonReport</label>
        </div>
        <div class="col-md-6 col-lg-6">
            <button id="btnViewReport" class="btn btn-second" style="float:right">@Resource.ViewReport</button>
        </div>
    </div>

    <div>
        @{
            Html.RenderPartial("_DateFilter");
        }
    </div>
    <div>
        @{
            Html.RenderPartial("_SalePersonFilter");
        }
    </div>

</div>

<script type="text/javascript">
    var lstUserID = [],lstClientID=[];
    $(function () {
        $('#btnViewReport').click(function () {
            let fromDate = $('#inputFromDate').val();
            let toDate = $('#inputToDate').val();
            $("#divSalePersonFilter").load("#divSalePersonFilter");
            window.location.href = '@Url.Action("SaleAmountBySalePersonReport", "RpSaleAmountBySalePerson")?fromDate=' + fromDate + '&toDate=' + toDate + '&lstUserID=' + JSON.stringify(lstUserID)+'&lstClientID='+JSON.stringify(lstClientID);
        });
    })
    $(document).ready(function () {
        if ('@ViewBag.ErrorMessage'.length != 0) {
            showToast(0, '@ViewBag.ErrorMessage');
        }
        initializeControl();
        function initializeControl() {
            $('#inputFromDate').val(getTodayDate());
            $('#inputToDate').val(getTodayDate());
            let userList = JSON.parse('@Html.Raw(Json.Encode(ViewBag.UserData))');
            let clientList = JSON.parse('@Html.Raw(Json.Encode(ViewBag.ClientData))');
            createSalePersonFilter(userList,clientList);
        }
    })
</script>



