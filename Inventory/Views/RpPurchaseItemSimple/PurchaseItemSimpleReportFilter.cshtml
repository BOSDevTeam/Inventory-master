@{
    Layout = "~/Views/Shared/_LayoutReport.cshtml";
}

<head>
    <link rel="stylesheet" type="text/css" href="~/assets/css/style.css">
    <link href="~/Content/Site.css" rel="stylesheet" />
    <script src="~/assets/js/jquery-3.2.1.min.js"></script>

    <style type="text/css">
        #subMenuPurchaseRpGp {
            display: block;
        }
    </style>
    <script type="text/javascript">
        document.getElementById('subMenuPurchaseItemSimpleRp').className = 'active';
    </script>
</head>
<div>
    <div class="row setup-title-layout">
        <div class="col-md-6 col-lg-6">
            <label class="page-title">@Resource.PurchaseItemSimpleReport</label>
        </div>
        <div class="col-md-6 col-lg-6">
            <button id="btnViewReport" class="btn btn-second" style="float:right">@Resource.ViewReport</button>
        </div>
    </div>

    <div>
        @{
            Html.RenderPartial("_DateFilter");
        }
    </div>
    <div>
        @{
            Html.RenderPartial("_MenuFilter");
        }
    </div>

</div>

<script type="text/javascript">
    var subMenuIDArray = [];
    $(function () {
        $('#btnViewReport').click(function () {
            let fromDate = $('#inputFromDate').val();
            let toDate = $('#inputToDate').val();
            $("#divMenuFilter").load("#divMenuFilter");
            window.location.href = '@Url.Action("PurchaseItemSimpleReport", "RpPurchaseItemSimple")?fromDate=' + fromDate + '&toDate=' + toDate + '&SubMenuID=' + JSON.stringify(subMenuIDArray);
        });
    })
    $(document).ready(function () {
        if ('@ViewBag.ErrorMessage'.length != 0) {
            showToast(0, '@ViewBag.ErrorMessage');
        }
        initializeControl();
        function initializeControl() {
            $('#inputFromDate').val(getTodayDate());
            $('#inputToDate').val(getTodayDate());
            let menuList = JSON.parse('@Html.Raw(Json.Encode(ViewBag.MenuData))');
            createMenuFilter(menuList);
        }
    })
</script>

